# [全天候动量轮动ETF策略设计思路](https://mp.weixin.qq.com/s/aDVZfjGU4HwszkjGba583g)

## 1. 标的资产选择逻辑：构建跨市场、跨资产类别的配置组合

### 沪深300ETF（510300.SS）

- *代表中国A股核心资产*：沪深300指数涵盖A股市场市值最大、流动性最好的300只股票，反映中国宏观经济和股票市场整体走势
- *基准作用*：作为策略绩效对比的基准，衡量策略能否跑赢市场平均水平
- *市值风格暴露*：主要配置大盘蓝筹股，提供稳定的市场贝塔收益

### 纳指ETF（513100.SS）

- *代表全球科技成长板块*：跟踪纳斯达克100指数，涵盖苹果、微软、亚马逊等全球科技巨头
- *分散化价值*：与A股市场的相关性相对较低，提供跨市场配置机会
- *成长因子暴露*：科技股通常具有更高的成长性和波动性，为动量策略提供潜在的高收益机会

### 黄金ETF（518880.SS）

- *避险资产与通胀对冲工具*：黄金具有避险属性，通常在市场动荡时期表现较好
- *负相关性资产*：与股票资产往往呈现负相关或低相关性，有助于降低组合整体波动
- *货币属性*：反映美元走势和全球流动性状况，提供额外的配置维度

*组合设计理念*：这三个ETF分别代表国内股票、海外科技股票和大宗商品三类不同资产，具有良好的分散化效果。历史数据显示这三类资产的相关性较低，能够在不同市场环境下相互对冲，为动量轮动策略提供了良好的基础。

## 2. 动量因子选择与计算逻辑

*理论基础*：动量效应是金融市场上最稳健的异象之一，由 Jegadeesh 和 Titman（1993）首次系统论证。其核心逻辑是"趋势延续"——过去表现较好的资产在未来短期内继续表现较好的概率较高。

### 20日动量窗口设计

- *短期趋势捕捉*：20个交易日（约1个月）的窗口能够有效捕捉中期趋势，避免长期趋势的滞后性和短期噪声干扰
- *平衡敏感性与稳定性*：较10日窗口更稳定，较60日窗口更敏感，适合A股的交易节奏
- *实践验证*：在A股市场中，20-60日的动量效应较为显著

*动量计算方式*：使用简单算术平均而非几何平均，更敏感地反映近期价格变化。每个交易日收盘后计算过去20日的平均日收益率，作为该ETF的动量得分。

## 3. 波动率调整的必要性与方法

*问题意识*：未经调整的动量指标存在严重缺陷——高收益可能源自高波动而非真正的趋势质量。例如，某个ETF可能因为单日暴涨而具有很高的动量值，但这种高波动性的"趋势"往往不可持续且风险较大。

### 风险调整动量：

- *经济学原理*：借鉴夏普比率的思想，将收益与风险（波动率）相结合，计算单位风险带来的收益
- *计算方法*：动量值 ÷ 波动率（标准差），这实质上是短期夏普比率的近似
- *核心优势*：
    1. *公平比较*：使不同波动特性的资产可以在同一标准下比较
    2. *风险控制*：自动降低高波动资产的权重，避免组合过度暴露于高风险资产
    3. *稳定性提升*：筛选出的标的既有上涨潜力又有相对稳定的表现

波动率计算细节：使用20日收益率的方差（波动率平方），取其平方根得到标准差。这种滚动窗口计算能够动态反映资产近期的风险特征。

## 4. 权重分配机制设计

### 正动量筛选

- *顺势而为原则*：只选择调整动量为正的资产，避免逆势操作
- *空仓机制*：当所有资产调整动量均为负时，权重合计为0，策略持有现金，这实质上是市场的择时机制

### 归一化加权

- *资金充分使用*：将100%的仓位分配给符合条件的资产，提高资金使用效率
- *动量强度反映*：权重与调整动量值成正比，趋势越强的资产获得越高权重
- *自动再平衡*：每日根据新信号调整权重，保持策略与市场状态的同步

### T+1交易制度

- *现实可行性*：使用T日收盘后计算的数据，在T+1日执行交易，符合A股实际交易规则
- *价格近似*：用T+1日收盘价近似代替"最高最低平均价"，简化回测同时保持合理性

## 5. 策略的哲学基础与预期效果

### 核心投资哲学

- *趋势跟踪*：承认市场趋势的存在并尝试从中获利
- *风险调整收益*：不仅追求收益，更关注收益的质量和稳定性
- *资产分散*：通过多资产配置降低单一市场风险
- *系统化执行*：避免主观情绪干扰，严格遵循量化规则

### 预期优势

- *穿越牛熊*：通过多资产轮动，在不同市场环境下都能找到表现较好的资产
- *风险控制*：波动率调整和正动量筛选提供双重风险控制
- *适应性*：权重每日更新，策略能够快速适应市场变化
- *透明可复制*：完全规则化的策略，结果可验证、过程可复制

### 潜在风险与局限

- *动量崩溃风险*：在市场急剧反转时，动量策略可能遭受较大损失
- *交易成本*：高频调仓可能产生显著的交易成本（回测中未考虑）
- *参数敏感性*：20日窗口和正动量阈值等参数需要定期检验和优化
- *流动性假设*：假设可以按收盘价交易，实际中大宗交易可能影响成交价格

这个策略体现了现代量化投资的核心思想：通过系统化的方法，在控制风险的前提下，捕捉市场的统计规律。它不试图预测市场方向，而是设计一套规则来响应市场变化，力求在不同市场环境下都能获得稳健的风险调整后收益。

## 全天候动量轮动ETF策略代码

接下来分享实现上述策略的代码，本部分包括三块内容：代码功能说明、注意事项和代码。

### 代码功能说明

1. *数据获取与处理*：使用 `quantmod` 包从Yahoo Finance获取三大ETF的历史数据。
2. *指标计算*：
    - 计算20日平均日收益率作为动量
    - 计算20日方差作为波动率
    - 计算调整动量（动量/波动率）
3. *权重分配*：每个交易日筛选调整动量>0的标的，按调整动量大小归一化分配权重
4. *回测逻辑*：使用T日计算的权重，在T+1日以平均价（收盘价近似）执行交易
5. *绩效分析*：计算年化收益率、波动率、夏普比率、最大回撤等关键指标
6. *可视化输出*：生成三种对比图表

### 注意事项

1. *ETF代码*：程序中使用的ETF代码是基于常识的常见代码，如果与实际不符，请修改`etf_symbols`变量
2. *数据源*：Yahoo Finance数据有时可能不完整，如果获取失败可以尝试其他数据源
3. *交易成本*：此回测未考虑交易成本，实际收益会略低
4. *执行价格*：实际交易中T+1日的买入价格使用最高最低平均价，这里用收盘价近似

在`R`软件中运行此代码后，你将得到完整的回测结果，包括绩效指标、每日权重分配和对比图表。所有结果也会自动保存到 `momentum_strategy_backtest` 文件夹中。
